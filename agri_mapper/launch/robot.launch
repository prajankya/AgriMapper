<?xml version="1.0"?>
<launch>
    <arg name="port" default="/dev/ttyACM0"/>
    <arg name="debug" default="false"/>

    <arg name="sim" default="false"/>

    <include file="$(find agri_mapper_description)/launch/desc.launch"/>

    <include file="$(find agri_mapper_description)/launch/state_publisher.launch"/>

    <node name="odom_calc" pkg="agri_mapper_base" ns="agri_mapper" type="odom_calc" output="screen"/>

    <node ns="agri_mapper" pkg="agri_mapper_base" type="scan_clipper" name="scan_clipper" respawn="true" output="screen">
        <param name="min_angle" type="double" value="90.0"/>
        <param name="max_angle" type="double" value="270.0"/>
    </node>

    <!-- TODO: Call to agri_mapper_base -->

    <group if="$(arg debug)">
        <include file="$(find agri_mapper)/launch/diagnostics.launch"/>
    </group>

    <group unless="$(arg sim)">
        <include file="$(find agri_mapper_base)/launch/arduino.launch"/>
        <include file="$(find agri_mapper_bringup)/launch/rplidar.launch"/>
    </group>

</launch>
